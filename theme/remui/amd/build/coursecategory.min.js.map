{"version":3,"file":"coursecategory.min.js","sources":["../src/coursecategory.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable no-unused-vars */\n/* eslint-disable jsdoc/require-jsdoc */\n/* eslint-disable no-unused-vars */\n/* eslint-disable babel/semi */\n/* eslint-disable no-trailing-spaces*/\n\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     theme_remui/coursecategory\n * @copyright (c) 2023 WisdmLabs (https://wisdmlabs.com/)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\"use strict\";\n\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/str',\n    'core/templates',\n    'theme_remui/jquery-toolbar',\n    'core/notification',\n    'core_user/repository',\n    'theme_remui/bootstrap-select'\n], function($, Ajax, str, templates, toolbar, Notification,UserRepository) {\n\n    // Globals.\n    var filterobj;\n    var langstrings;\n\n    var categoryfilter = $('#categoryfilter');\n\n    var sortfilter = $('select#sortfilter');\n\n    var categorylink = '[category-filter-link]';\n\n    var cardswrapperarea = $('.course-cards');\n    var cardspagination = $('.cards-pagination');\n\n    var pageheaderactions = '.page-header-actionss';\n    // View templates.\n    var gridtemplate = 'theme_remui/course_card_grid';\n    var listtemplate = 'theme_remui/course_card_list';\n    var summarytemplate = 'theme_remui/course_card_summary';\n\n    var searchfilter = $('.layout-1 .filters-wrapper .simplesearchform');\n\n    var mycoursescheckbox = $('.custom-switch');\n\n    var coursecounter = $('.course-counter span.course-number');\n\n    var tagswrapper = $('.tag-wrapper');\n\n    var togglebtn = $(\".togglebtn\");\n    /**\n     * Main category filters class.\n     * @param  {Integer} defaultCategory Default category to select.\n     * @return {Object}  Filter object\n     */\n    var categoryFilters = function(defaultCategory) {\n\n        var _pageobj = {courses: 0, mycourses: 0};\n        var _obj = {\n            // Category id.\n            category: defaultCategory,\n            // Sorting.\n            sort: 'ASC',\n            // Searching string.\n            search: \"\",\n            // If true, means mycourses tab is active.\n            tab: false,\n            // This object consist of page number that is currently active, has mycourses and all courses tab page number.\n            page: _pageobj,\n            // If True, regenerate the pagination on any action performed.\n            pagination: true,\n            // Initially it is null to detect initial change in view, String grid - view in grid format, String list - list format.\n            // view: null,\n            // This filterModified true will tell that we need to fetch the courses otherwise show old fetched data.\n            isFilterModified: true\n        };\n\n        _obj.initAttributes = function() {\n            _obj.category = defaultCategory;\n            _obj.sort = 'ASC';\n            _obj.search = '';\n            _obj.tab = false;\n            _obj.page = _pageobj;\n            _obj.pagination = true;\n            // _obj.view = null;\n            _obj.isFilterModified = true;\n        };\n\n        _obj.initPagination = function() {\n            _obj.page = {courses: 0, mycourses: 0};\n        };\n        return _obj;\n    };\n\n    /**\n     * Course content object to handle ajax.\n     */\n    var courseContent = new (function() {\n        this.mycourses = false;\n        this.courses = false;\n\n        /**\n         * Check if course contents are loaded.\n         * @returns {Boolean}\n         */\n        this.isLoaded = function() {\n            let type = courseContent.getActive();\n            return this[type];\n        };\n\n        /**\n         * Mark courses as loaded\n         * @param {Boolean} state Loading state\n         */\n        this.loaded = function(state) {\n            let type = courseContent.getActive();\n            if (state === undefined) {\n                state = true;\n            }\n            this[type] = state;\n        };\n\n        /**\n         * Reset courses.\n         */\n        this.reset = function() {\n            this.mycourses = false;\n            this.courses = false;\n        };\n\n        /**\n         * Get currently active tab\n         * @returns {String}\n         */\n        this.getActive = function() {\n            return filterobj.tab === true ? 'mycourses' : 'courses';\n        };\n    })();\n\n    /**\n     * Filters Generation\n     * @param  {Object} filterdata Filter data\n     */\n    function generateFilters(filterdata) {\n        $(\".selectpicker\").each(function() {\n            $(this).selectpicker();\n        });\n\n        if (filterdata.category !== \"\") {\n\n\n            if($.isNumeric(filterdata.category)){\n                var targetElement = $('.categoryfiltermenu .dropdown-menu a[data-cat-id=\"' + filterdata.category + '\"]');\n                $('.categoryfiltermenu .categoryfilter span').text(targetElement.text());\n            }\n            // $(\"#categoryfilter.selectpicker\").selectpicker('val', filterdata.category);\n        }\n\n        if (filterdata.tab == true) {\n            $('#switch-label1, #switch-label2').prop('checked', true);\n        } else {\n            $('#switch-label1, #switch-label2').prop('checked', false);\n        }\n        if (filterdata.sort !== null && filterdata.sort != undefined && typeof filterdata.sort != \"function\") {\n            $(\"#sortfilter.selectpicker\").selectpicker('val', filterdata.sort);\n        }\n\n        if (filterdata.search !== \"\") {\n            $(searchfilter).find('input[type=\"text\"]').val(filterdata.search);\n        }\n\n        // Put animation over here.\n        // $(\".filters-wrapper\").removeClass('d-none');\n    }\n\n    /**\n     * Update page content\n     */\n    function updatePage() {\n        // Destroy the cards from page.\n        destroyCourseCards();\n        // Create courses cards again.\n        generateCourseCards();\n    }\n\n    /*\n     * Populate the tags section.\n     */\n    function populate_tags() {\n        var serviceName = 'theme_remui_get_tags';\n        var getcourses = Ajax.call([{\n            methodname: serviceName,\n            args: {\n                data: JSON.stringify(filterobj)\n            }\n        }]);\n        getcourses[0].done(function(response) {\n            tagswrapper.empty().append(response);\n            generateHorizontalScroller($(\".tag_list\"));\n\n        }).fail(Notification.exception);\n    }\n\n    const generateHorizontalScroller = (element) => {\n        const _leftscroll = \".left-scroll\";\n        const _rightscroll = \".right-scroll\";\n\n        if (element.length == 0) {\n            return;\n        }\n\n        const _main = element[0];\n\n        if (_main.scrollWidth > _main.clientWidth) {\n\n            $(_leftscroll + \",\" + _rightscroll).removeClass(\"d-none\");\n\n            const updateButtons = () => {\n\n                $(_leftscroll).disabled = false;\n                $(_rightscroll).disabled = false;\n\n                if (_main.scrollLeft == 0) {\n                    $(_leftscroll).disabled = true;\n                }\n\n                var _scrollWidth = _main.scrollWidth;\n                var _clientWidth = _main.clientWidth;\n                var _scrollLeft = _main.scrollLeft;\n                var _rightPos = _scrollWidth - _clientWidth;\n                // Here we detect if element if fully scrolled to right.\n                if (_scrollLeft == _rightPos) {\n                    $(_leftscroll).disabled = true;\n                }\n            };\n\n            const moveRight = (_ele, scrollStep = 30) => {\n                _ele.scrollLeft += scrollStep;\n                updateButtons();\n            };\n\n            const moveLeft = (_ele, scrollStep = 30) => {\n                _ele.scrollLeft -= scrollStep;\n                updateButtons();\n            };\n\n            var _lInterval;\n            var _rInterval;\n\n            $(_leftscroll).on(\"mouseover\", function() {\n                _lInterval = setInterval(function() {\n                    moveLeft(_main, 1);\n                }, 1);\n\n            });\n\n            $(_rightscroll).on(\"mouseover\", function() {\n                _rInterval = setInterval(function() {\n                    moveRight(_main, 1);\n                }, 1);\n            });\n\n            $(_leftscroll).on(\"mouseout\", function() {\n clearInterval(_lInterval);\n});\n            $(_rightscroll).on(\"mouseout\", function() {\n clearInterval(_rInterval);\n});\n        }\n    };\n\n    /**\n     * Course cards initialization function.\n     */\n    function generateCourseCards() {\n        // Check if Filters are modified and need to fetch the courses.\n        if (!filterobj.isFilterModified) {\n            return;\n        }\n        toggleContent(true);\n\n        // Fetch the courses.\n        getCourses();\n\n\n    }\n\n    /**\n     * Hide the content.\n     * @param  {Boolean} hidecontent\n     */\n    function toggleContent(hidecontent) {\n        if (hidecontent) {\n            $(\"#course-archive-main-container .tag-wrapper\").addClass(\"d-none\");\n            $(\"#course-archive-main-container .course-cards\").addClass(\"d-none\");\n            $(\"#course-archive-main-container .cards-pagination\").addClass(\"d-none\");\n            $(\"#course-archive-main-container .loader-overlay\").addClass(\"d-flex\").removeClass(\"d-none\");\n        } else {\n            $(\"#course-archive-main-container .tag-wrapper\").removeClass(\"d-none\");\n            $(\"#course-archive-main-container .course-cards\").removeClass(\"d-none\");\n            $(\"#course-archive-main-container .cards-pagination\").removeClass(\"d-none\");\n            $(\"#course-archive-main-container .loader-overlay\").addClass(\"d-none\").removeClass(\"d-flex\");\n        }\n    }\n    /**\n     * Destroy courses cards\n     */\n    function destroyCourseCards() {\n        // Find active tab to append the course cards.\n        // var destroytab = (filterobj.tab) ? mycoursesregion : coursesregion;\n        // Empty the courses region.\n        $(cardswrapperarea).empty();\n\n        // Destroy the pagination also.\n        if (filterobj.pagination) {\n            // Var destroypagination = (filterobj.tab) ? mycoursespagination : coursespagination;\n            // $(destroypagination).empty();\n            cardspagination.empty();\n        }\n    }\n\n    /**\n     * Ajax to fetch the course and also append those courses to the page.\n     * If pagination is enabled it will also generate new pagination.\n     */\n    function getCourses() {\n        $('.courses-tabs .courses-loader-wrap').show();\n        // Find active tab to append the course cards.\n        // var appendtab = (filterobj.tab) ? mycoursesregion : coursesregion;\n        // var appendpagination = (filterobj.tab) ? mycoursespagination : coursespagination;\n        var serviceName = 'theme_remui_get_courses';\n        var getcourses = Ajax.call([{\n            methodname: serviceName,\n            args: {\n                data: JSON.stringify(filterobj)\n            }\n        }]);\n        getcourses[0].done(function(response) {\n            response = JSON.parse(response);\n            // $(\"#page-header\").load(location.href + \" #page-header\");\n            // $(\".filters-wrapper .navitem\").load(location.href + \" .filters-wrapper .navitem\");\n            // Empty the action button on top header, and add new ones.\n            $(coursecounter).text(response.totalcoursescount);\n            $(pageheaderactions).empty();\n            if (response.hasmanagebutton == true) {\n                $(pageheaderactions).append(response.managebuttons);\n            }\n\n            // Show category management dropdown button when user has 'moodle/category:manage' capability.\n            if (response.dropdown != undefined) {\n                $('#page-header .page-header-actionss').append(response.dropdown);\n            } else {\n                $('#page-header .page-header-actionss [data-enhance=\"moodle-core-actionmenu\"]').remove();\n            }\n\n            // Get the view.\n            var viewobj = (typeof filterobj.view === \"undefined\") ? response.view : filterobj.view;\n            // Var viewobj = 'grid'; // View is always in grid form.\n            // Select the template to render according to view.\n            // Var rendertemplate = (viewobj == 'grid' || response.latest_card) ? gridtemplate : listtemplate;\n\n            // It will handle the view buttons synchronization with myoverview settings\n            var filterbuttonsarray = $('.filters-wrapper .view-buttons .btn');\n            var prefveiwbuttonavailable = filterbuttonsarray.filter(function() {\n                return $(this).attr('data-view') == viewobj;\n            }).length > 0;\n            if (!prefveiwbuttonavailable) {\n                if (filterbuttonsarray.length >= 1) {\n                    viewobj = $(filterbuttonsarray[0]).attr('data-view');\n                }\n            }\n            var rendertemplate = gridtemplate;\n\n            if (viewobj == 'grid' || response.latest_card) {\n                rendertemplate = gridtemplate;\n            }\n            if (viewobj == 'list' || response.latest_card) {\n                rendertemplate = listtemplate;\n            }\n            if (viewobj == 'summary' || response.latest_card) {\n                rendertemplate = summarytemplate;\n            }\n\n            // Always render grid teplate on mobile screen and when latest cards setting is on.\n            if (window.screen.width <= 480 || response.latest_card) {\n                rendertemplate = gridtemplate;\n                viewobj = 'grid';\n            }\n\n            if (prefveiwbuttonavailable) {\n                // Update the view.\n                updateView(viewobj);\n            }else{\n                // Update the card container.\n                updateCardContainer(viewobj);\n            }\n            updateCards(response.latest_card);\n\n            var courses = response.courses;\n            if (courses.length > 0) {\n                for (var i = 0; i < courses.length; i++) {\n                    // This will call the function to load and render our template.\n                    templates.render(rendertemplate, courses[i])\n                    // It returns a promise that needs to be resoved.\n                    /* eslint no-loop-func: 0 */\n                    .then(function(html, js) {\n                        // Here eventually I have my compiled template, and any javascript that it generated.\n                        // The templates object has append, prepend and replace functions.\n                        // templates.appendNodeContents(appendtab, html, js);\n                        templates.appendNodeContents(cardswrapperarea, html, js);\n\n                        // Show options button on course card.\n                        // check if not mycourse tab.\n                        // This is very bad code, couldn't do it another way.\n                        // it get called each time a single card is added to dom, try to improve it.\n                        if (!filterobj.tab && !response.latest_card) {\n                            /* eslint promise/always-return: 0 */\n                            $('.showoptions').each(function() {\n                                $(this).toolbar({\n                                    content: $(this).data('toolbar'),\n                                    style: 'primary'\n                                });\n                            });\n                        }\n                    }).fail(Notification.exception);\n                }\n\n            } else {\n                var htmldata = '<div class=\"alert alert-warning alert-dismissible  w-full mx-10\" role=\"alert\">';\n                htmldata += '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">' +\n                    '<span aria-hidden=\"true\">×</span><span class=\"sr-only\">Close</span></button>' + langstrings[0] + '</div>';\n                templates.appendNodeContents(cardswrapperarea, htmldata, '');\n\n            }\n\n            // Pagination html.\n            // Check if pagination is enabled.\n            if (filterobj.pagination) {\n                templates.appendNodeContents(cardspagination, response.pagination, '');\n            }\n            $('.courses-tabs .courses-loader-wrap').hide();\n            toggleContent(false);\n        }).fail(Notification.exception);\n    }\n\n    /**\n     * Update cards view\n     * @param  {Boolean} latest True if want to show as latest card\n     */\n    function updateCards(latest) {\n        if (latest) {\n            cardswrapperarea.addClass('latest-cards');\n            $('.viewtoggler').addClass('hidden');\n        } else {\n            cardswrapperarea.removeClass('latest-cards');\n            $('.viewtoggler').removeClass('hidden');\n        }\n    }\n\n    /**\n     * This function is commented because no one is going to resize the screen.\n     * @param  {String} view View typ\n     */\n    function updateView(view) {\n        if (view == 'grid') {\n            filterobj.view = 'grid';\n            cardswrapperarea.addClass('grid-view edw-course-card-grid').removeClass('list-view edw-course-list-container list-group summary-view edw-course-summary-container edw-course-summary-container d-flex flex-column m-0');\n            $('.grid_btn').addClass('btn-primary active');\n            $('.list_btn').removeClass('btn-primary active');\n            $('.summary_btn').removeClass('btn-primary active');\n        }\n        if (view == 'list') {\n            cardswrapperarea.addClass('list-view list-group edw-course-list-container').removeClass('grid-view edw-course-card-grid summary-view edw-course-summary-container edw-course-summary-container d-flex flex-column m-0');\n            $('.list_btn').addClass('btn-primary active');\n            $('.grid_btn').removeClass('btn-primary active');\n            $('.summary_btn').removeClass('btn-primary active');\n        }\n        if (view == 'summary') {\n            cardswrapperarea.addClass('summary-view edw-course-summary-container d-flex flex-column m-0').removeClass('list-view list-group edw-course-list-container grid-view edw-course-card-grid');\n            $('.summary_btn').addClass('btn-primary active');\n            $('.list_btn').removeClass('btn-primary active');\n            $('.grid_btn').removeClass('btn-primary active');\n        }\n    }\n\n    /**\n     *\n     * @param  {String} view View typ\n     */\n    function updateCardContainer(view){\n        if (view == 'grid') {\n            cardswrapperarea.addClass('grid-view edw-course-card-grid').removeClass('list-view edw-course-list-container list-group summary-view edw-course-summary-container edw-course-summary-container d-flex flex-column m-0');\n        }\n        if (view == 'list') {\n            cardswrapperarea.addClass('list-view list-group edw-course-list-container').removeClass('grid-view edw-course-card-grid summary-view edw-course-summary-container edw-course-summary-container d-flex flex-column m-0');\n        }\n        if (view == 'summary') {\n            cardswrapperarea.addClass('summary-view edw-course-summary-container d-flex flex-column m-0').removeClass('list-view list-group edw-course-list-container grid-view edw-course-card-grid');\n        }\n    }\n    // This is for, Toolbar redirection not working.\n    $(document).delegate('.tool-item', 'click', function() {\n        window.location = $(this).attr('href');\n    });\n\n    $(categoryfilter).on('change', function(e) {\n\n        filterobj.category = e.target.value;\n\n        var url = M.cfg.wwwroot + '/course/index.php?categoryid=' + encodeURI(e.target.value);\n\n        if (filterobj.search != \"\") {\n            url += \"&search=\" + filterobj.search;\n        }\n\n        if (filterobj.sort != \"default\" && filterobj.sort != -1 && typeof filterobj.sort != \"function\") {\n            url += \"&sort=\" + filterobj.sort;\n        }\n\n        window.history.replaceState(\n            'pagechange',\n            document.title,\n            url\n        );\n\n        window.location.reload();\n        // UpdatePage();\n        // populate_tags();\n    });\n\n    // Search Filter.\n    $(searchfilter).on('submit', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        filterobj.initPagination();\n        filterobj.search = $('#course-archive-main-container .filters-wrapper .simplesearchform input.form-control').val();\n        courseContent.reset();\n        updatePage();\n    });\n\n    $('#switch-label1, #switch-label2').on('change.bootstrapSwitch', function(e, data) {\n        filterobj.tab = e.target.checked;\n        updatePage();\n        populate_tags();\n    });\n\n    // View toggler.\n    $(togglebtn).on('click', function() {\n        var clckviewbtn = $(this).attr('data-view');\n        filterobj.view = clckviewbtn;\n        updateView(filterobj.view);\n        UserRepository.setUserPreference('course_view_state', clckviewbtn, null);\n        updatePage();\n    });\n\n    // Sorting Filter.\n    $(sortfilter).on('changed.bs.select', function(e) {\n        filterobj.sort = e.target.value;\n        updatePage();\n    });\n\n    $(\"#course-archive-main-container\").on('click', \".menu-picker-select\", function() {\n        $(this).find(\".menu-content\").toggleClass('d-none');\n        $(this).find(\".edw-icon-Setting\").toggleClass('d-none');\n        $(this).find(\".edw-icon-Cancel\").toggleClass('d-none');\n    });\n\n    // Pagination Click Event.\n    $(document).delegate('.cards-pagination .pagination .page-item .page-link', 'click', function(e) {\n        e.preventDefault();\n        // Update the page number in object for mycourses as well as all courses tab.\n        var linkdata = e.target.href;\n        if (linkdata === undefined) {\n            linkdata = e.target.parentElement.href;\n            if (linkdata === undefined) {\n                linkdata = e.target.parentElement.parentElement.href;\n            }\n        }\n\n        var hashes = linkdata.slice(linkdata.indexOf('?') + 1).split('&');\n        var vars = [],\n            hash;\n        for (var i = 0; i < hashes.length; i++) {\n            hash = hashes[i].split('=');\n            vars.push(hash[0]);\n            vars[hash[0]] = hash[1];\n        }\n\n        if (filterobj.tab) {\n            filterobj.page.mycourses = vars.page;\n        } else {\n            filterobj.page.courses = vars.page;\n        }\n\n        updatePage();\n    });\n\n    var init = function(defaultCategory) {\n        $(document).ready(function() {\n            var categorydescription = $(\".category-description-container\").get();\n            $(\".filters-wrapper .category-description-container\").remove();\n            $(categorydescription).insertAfter(\".header-wrapper\");\n            $(categorydescription).removeClass(\"d-none\");\n\n            // Gradient effect handling on category discription\n            var summaryheight = $('.category-description-wrapper').height();\n\n            if (summaryheight > 300) {\n                $('.category-description-container').find('#readmorebtn').removeClass('d-none');\n                $('.category-description-wrapper').addClass('summary-collapsed').removeClass('summary-expanded');\n            }\n            $('.category-description-container #readmorebtn').on('click', function() {\n                $('.category-description-wrapper').addClass('summary-expanded').removeClass('summary-collapsed');\n                $('.category-description-container').find('#readmorebtn').addClass('d-none');\n                $('.category-description-container').find('#readlessbtn').removeClass('d-none');\n            });\n            $('.category-description-container #readlessbtn').on('click', function () {\n                $('.category-description-wrapper').addClass('summary-collapsed').removeClass('summary-expanded');\n                $('.category-description-container').find('#readmorebtn').removeClass('d-none');\n                $('.category-description-container').find('#readlessbtn').addClass('d-none');\n            });\n        });\n\n        $(categorylink).on('click', function(event) {\n            event.preventDefault();\n            $(categoryfilter).val($(this).data('id')).trigger('change');\n            return false;\n        });\n        var strings = [\n            {\n                key: 'nocoursefound',\n                component: 'theme_remui'\n            }\n        ];\n        str.get_strings(strings).then(function(stringres) {\n            langstrings = stringres;\n\n            filterobj = categoryFilters(defaultCategory); // Global object for filters.\n            // Initialize global filter object with default values.\n\n            var vars = [],\n                hash;\n            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n            for (var i = 0; i < hashes.length; i++) {\n                hash = hashes[i].split('=');\n                vars.push(hash[0]);\n                vars[hash[0]] = hash[1];\n            }\n\n            if (vars.categoryid && vars.categoryid != 0) {\n                filterobj.category = vars.categoryid;\n            }\n\n            if (vars.sort != undefined) {\n                filterobj.sort = vars.sort;\n            }\n\n            if (vars.search != undefined) {\n                filterobj.search = decodeURI(vars.search);\n            }\n\n            generateFilters(filterobj); // This will create filters.\n            generateCourseCards(); // Course cards Generation.\n            populate_tags();\n        });\n    };\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","$","Ajax","str","templates","toolbar","Notification","UserRepository","filterobj","langstrings","categoryfilter","sortfilter","cardswrapperarea","cardspagination","gridtemplate","searchfilter","coursecounter","tagswrapper","togglebtn","courseContent","mycourses","courses","isLoaded","this","getActive","loaded","state","undefined","reset","tab","updatePage","empty","pagination","generateCourseCards","populate_tags","call","methodname","args","data","JSON","stringify","done","response","append","generateHorizontalScroller","fail","exception","element","length","_main","scrollWidth","clientWidth","_leftscroll","removeClass","updateButtons","disabled","scrollLeft","_scrollWidth","_clientWidth","moveRight","_ele","scrollStep","moveLeft","_lInterval","_rInterval","on","setInterval","clearInterval","isFilterModified","toggleContent","show","serviceName","parse","text","totalcoursescount","hasmanagebutton","managebuttons","dropdown","remove","viewobj","view","filterbuttonsarray","prefveiwbuttonavailable","filter","attr","rendertemplate","latest_card","window","screen","width","updateView","addClass","updateCardContainer","i","render","then","html","js","appendNodeContents","each","content","style","htmldata","hide","getCourses","hidecontent","document","delegate","location","e","category","target","value","url","M","cfg","wwwroot","encodeURI","search","sort","history","replaceState","title","reload","preventDefault","stopPropagation","initPagination","val","checked","clckviewbtn","setUserPreference","find","toggleClass","linkdata","href","parentElement","hash","hashes","slice","indexOf","split","vars","push","page","init","defaultCategory","ready","categorydescription","get","insertAfter","height","event","trigger","get_strings","key","component","stringres","_pageobj","_obj","categoryFilters","categoryid","decodeURI","filterdata","selectpicker","isNumeric","targetElement","prop","generateFilters"],"mappings":"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"}